<!DOCTYPE html>
<html>
  <br><br><br>
  <head>
    <meta charset="UTF-8">
    <style>
      body {
        font-family: sans-serif;
        text-align: center;
        font-size: 5em;
        font-weight: bold;
        }
    </style>
  </head>
  <body>
    <p id="password"></p>
    <script>
      function shuffleWord(word){
        var shuffledWord = "";
        word = word.split("");
        while (word.length > 0) {
          shuffledWord +=  word.splice(word.length * Math.random() << 0, 1);
        }
        return shuffledWord;
      }
      function generatePassword() {
          const length = 11;
          const digits = "123456789";
          const lowerCaseLetters = "abcdefghikmnpqrstuvwxyz";
          const upperCaseLetters = "ABCDEFGHKLMNPQRSTUVWXYZ";
          const specialCharacters = "!@#$%^&*()_+-=[]{};':\",.>/?";

          // Make sure the password starts with a non-special character
          let characterSet = digits + lowerCaseLetters + upperCaseLetters;
          let password = randomCharFromSet(characterSet);

          // Choose 2 lower case letters
          let count = 0;
          while (count < 2) {
            characterSet = lowerCaseLetters;
            const char = randomCharFromSet(characterSet);
            if (!password.includes(char)) {
              password += char;
              count++;
            }
          }

          // Choose 2 upper case letters
          count = 0;
          while (count < 2) {
            characterSet = upperCaseLetters;
            const char = randomCharFromSet(characterSet);
            if (!password.includes(char)) {
              password += char;
              count++;
            }
          }

          // Choose 2 special characters
          count = 0;
          while (count < 2) {
            characterSet = specialCharacters;
            const char = randomCharFromSet(characterSet);
            if (!password.includes(char)) {
              password += char;
              count++;
            }
          }

          // Fill the rest of the password randomly
          while (password.length < length - 1) {
            characterSet = digits + lowerCaseLetters + upperCaseLetters + specialCharacters;
            password += randomCharFromSet(characterSet);
          }

          // Make sure the password ends with a non-special character
          characterSet = digits + lowerCaseLetters + upperCaseLetters;
          password += randomCharFromSet(characterSet);

          // Shuffle the mid section of the password
          password = password[0] + shuffleWord(password.substr(1,password.length-2)) + password[password.length-1];
          
          if (password.length == length) {
              const passwordElement = document.getElementById('password');
              passwordElement.innerHTML = password;
              passwordElement.style.fontWeight = 'bold';
          } 
        }       

        function randomCharFromSet(set) {
          return set.charAt(Math.floor(Math.random() * set.length));
        }

    generatePassword();
    
    </script>
  </body>
</html>
